<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: 2084.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: 2084.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @module 2048 */

/** Aquesta funció genera un tauler aleatori amb 2 2 
 * @param {number} size - Mida del tauler
 * @return {Array.&lt;Array.&lt;number>>}
*/
export function generate2048Board(size = 4) {
  /// Interesante: return new Array(size).fill(new Array(size).fill(0));
  return new Array(size).fill(0).map(() => new Array(size).fill(0));
}

/** Aquesta funció rep un tauler buit i retorna una funció que accepta un número per a posar-ho 2 vegades en el tauler
 * @param {Array&lt;number>} board
 * @returns {Function}
 */
export function randomPlace(board) {
  return function (number) {
    const maxPosition = board.length ** 2;
    let pos1 = Math.floor(Math.random() * maxPosition);
    let pos2 = pos1;
    while (pos1 === pos2) {
      pos2 = Math.floor(Math.random() * maxPosition);
    }
    const boardCopy = structuredClone(board);
    boardCopy[Math.floor(pos1 / board.length)][pos1 % board.length] = number;
    boardCopy[Math.floor(pos2 / board.length)][pos2 % board.length] = number;
    return boardCopy;
  };
}

/** Aquesta funció mou un array unidimensional cap al final, si troba dos números iguals els suma i els coloca cap al final
 * La funció sols fa un moviment i retorna el resultat d'aquest moviment. Si el moviment no suposa cap canvi, retorna sols una còpia de l'array original
 * Sempre retorna una copia, no muta l'array original
 * @param {Array&lt;number>} array
 * @return {Array&lt;number>}
 */
export function moveRow(array) {
  const row = [...array];
  for (let i = row.length - 1; i >= 0; i--) {
    if (row[i] !== 0 &amp;&amp; row[i + 1] === 0) {
      row[i + 1] = row[i];
      row[i] = 0;
    }
    if (row[i] !== 0 &amp;&amp; row[i + 1] === row[i]) {
      row[i + 1] = row[i] * 2;
      row[i] = 0;
    }
  }
  return row;
}

/** Aquesta funció rota una matriu n vegades en el sentit de les agulles del rellotge 
 * @param {Array.&lt;Array.&lt;number>>} matrix
 * @param {number} n_rotations
 * @return {Array.&lt;Array.&lt;number>>}
*/
export function rotateMatrix(matrix, n_rotations) {
  let result = structuredClone(matrix);
  for (let i = 0; i &lt; n_rotations; i++) {
    result = result[0].map((col, X) => result.map((row) => row[X]).reverse());
  }
  return result;
}

/** Aquesta funció rep un tauler i retorna una funció per moure en alguna de les 4 direccions possibles
 * El moviment desplaça tots els números cap a un costat, sempre que ocupen posicions amb 0.
 * En cas de trobar 2 números iguals i en el mateix eix del moviment, retorna la suma. i la col·loca sobre el número més pròxim al destí del moviment
 * @param {Array.&lt;Array.&lt;number>>} board
 * @return {Array.&lt;Array.&lt;number>>}
 */
export function moveBoard(board) {
  return function (direction) {
    const directions = { rigth: 0, left: 2, up: 1, down: 3 };
    let rotatedBoard = rotateMatrix(board, directions[direction]);
    // Hi ha un màxim de 3 moviments
    for (let i = 0; i &lt; 3; i++) {
        rotatedBoard = rotatedBoard.map(moveRow);
    }
    return rotateMatrix(rotatedBoard, 4-directions[direction]);
  };
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-2048.html">2048</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Mar 11 2024 19:34:09 GMT+0100 (Hora estàndard del Centre d’Europa)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
